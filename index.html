<!doctype html>
<html lang="zh-CN">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>ä¸ƒå¤•è§£è°œå°å†’é™© ğŸ’–</title>
<style>
  body {
    font-family: "Helvetica Neue", Arial, sans-serif;
    background: linear-gradient(135deg, #ffe6eb, #fff0f5);
    color: #333;
    padding: 24px;
    background-attachment: fixed;
  }
  .card {
    max-width: 760px;
    margin: 18px auto;
    padding: 22px;
    background: #fff;
    border-radius: 16px;
    box-shadow: 0 8px 24px rgba(255, 120, 160, 0.25);
    position: relative;
  }
  h1 {
    margin: 0 0 8px;
    font-size: 24px;
    color: #e25590;
    text-align: center;
  }
  p.lead {
    margin: 0 0 18px;
    color: #555;
    text-align: center;
  }
  .prompt {
    font-weight: 600;
    margin: 12px 0;
  }
  input[type="text"] {
    width: 100%;
    padding: 10px;
    border-radius: 8px;
    border: 1px solid #f3c1d8;
    font-size: 16px;
  }
  .btn {
    display: inline-block;
    margin-top: 12px;
    padding: 10px 14px;
    border-radius: 8px;
    background: #ff7aa2;
    color: #fff;
    border: none;
    cursor: pointer;
    transition: background 0.2s;
  }
  .btn:hover { background: #ff5a8c; }
  .btn.secondary {
    background: #ffe4ec;
    color: #d6336c;
    border: 1px solid #f9b5d1;
  }
  .hint {
    margin-top: 12px;
    padding: 10px;
    background: #fff8f9;
    border-left: 4px solid #ffb3c1;
    border-radius: 6px;
    display: none;
  }
  .msg {
    margin-top: 12px;
    padding: 10px;
    border-radius: 6px;
  }
  .msg.success {
    background: #fff0f5;
    border: 1px solid #f5a9c1;
    color: #a1104d;
  }
  .msg.error {
    background: #fff5f7;
    border: 1px solid #f3b0b0;
    color: #9a1b1b;
  }
  .progress { font-size: 13px; color: #888; margin-top: 10px; }
  .small { font-size: 13px; color: #999; text-align: center; }
  footer { margin-top: 18px; font-size: 13px; color: #888; text-align: center; }
  /* å°çˆ±å¿ƒåŠ¨ç”» */
  .hearts {
    position: absolute;
    top: -10px;
    left: 50%;
    transform: translateX(-50%);
    font-size: 20px;
    color: #ff5a8c;
    animation: float 3s infinite;
  }
  @keyframes float {
    0% { transform: translate(-50%,0) scale(1); opacity: 1; }
    50% { transform: translate(-50%,-20px) scale(1.2); opacity: 0.7; }
    100% { transform: translate(-50%,-40px) scale(1); opacity: 0; }
  }
</style>
</head>
<body>
  <div class="card">
    <div class="hearts">ğŸ’–</div>
    <h1>ä¸ƒå¤•è§£è°œå°å†’é™©</h1>
    <p class="lead">äº²çˆ±çš„ï¼Œè·Ÿéšè¿™æ¡çˆ±çš„çº¿ç´¢ï¼Œä¸€æ­¥æ­¥èµ°å‘æƒŠå–œå§ âœ¨</p>

    <div id="game">
      <div class="prompt" id="promptTxt"></div>
      <input id="answerInput" type="text" placeholder="è¾“å…¥ç­”æ¡ˆ..." autocomplete="off" />
      <div>
        <button id="submitBtn" class="btn">æäº¤ç­”æ¡ˆ</button>
        <button id="hintBtn" class="btn secondary">å°æç¤º ğŸ’Œ</button>
      </div>

      <div id="hintBox" class="hint"></div>
      <div id="message" class="msg" style="display:none"></div>
      <div id="nextArea" style="margin-top:12px;"></div>
      <div class="progress" id="progress"></div>
    </div>

    <footer>
      <div class="small">Happy ä¸ƒå¤• â¤ï¸ çˆ±åœ¨è§£è°œçš„æ¯ä¸€æ­¥ã€‚</div>
    </footer>
  </div>

<script>
const nodes = [
  {
    id: 1,
    prompt: "ç¬¬ä¸€å…³ ğŸ’•ï¼š\nåœ¨æˆ‘ä»¬çš„åˆç…§é‡Œï¼Œä½ æœ€å–œæ¬¢çš„é‚£ä¸ªç¬‘å®¹å¯¹åº”çš„æœˆä»½ï¼Œå°±æ˜¯å¯†ç ï¼ˆè¾“å…¥æœˆä»½æ•°å­—ï¼‰ã€‚",
    answer: "8",
    hint: "ä¸ƒå¤•åœ¨å…«æœˆå“¦ï½",
    successText: "å¤ªæ£’äº†ï¼ğŸ’– ç»§ç»­å‰å¾€ä¸‹ä¸€å…³ï¼Œæ›´å¤šçš„å›å¿†åœ¨ç­‰ä½ ï½"
  },
  {
    id: 2,
    prompt: "ç¬¬äºŒå…³ ğŸŒ™ï¼š\nè¿˜è®°å¾—ç¬¬ä¸€æ¬¡ä¸€èµ·çœ‹ç”µå½±å—ï¼Ÿé‚£éƒ¨ç”µå½±çš„ç¬¬ä¸€ä¸ªå­—æ¯ï¼ˆå¤§å†™ï¼‰å°±æ˜¯å¯†ç ã€‚",
    answer: "L",
    hint: "ç­”æ¡ˆåœ¨æˆ‘ä»¬ç¬¬ä¸€æ¬¡ç”µå½±é™¢çš„ç¥¨æ ¹é‡Œï½",
    successText: "å¥½æµªæ¼«ï¼ğŸ’Œ ç»§ç»­å‰è¿›å§ã€‚"
  },
  {
    id: 3,
    prompt: "æœ€åä¸€å…³ ğŸŒ¹ï¼š\nè¾“å…¥ä½ å¯¹æˆ‘å¸¸è¯´çš„ä¸‰ä¸ªå­—ï¼ˆæ‹¼éŸ³å¤§å†™ï¼‰ã€‚",
    answer: "WOAI NI",
    hint: "ä¸‰ä¸ªå­—ï¼Œæ˜¯ä½ æ¯å¤©æŒ‚åœ¨å˜´è¾¹çš„ï½",
    successText: "æ­å–œé€šå…³ï¼ğŸ‰ ä¸ƒå¤•å¿«ä¹ï¼Œæˆ‘çˆ±ä½  â¤ï¸ ç¤¼ç‰©åœ¨ç­‰ä½  ğŸ‘‰ <strong>https://example.com/yourgift</strong>"
  }
];

let currentNodeId = parseInt(localStorage.getItem('puzzle_current_node') || '1', 10);

const el = {
  promptTxt: document.getElementById('promptTxt'),
  answerInput: document.getElementById('answerInput'),
  submitBtn: document.getElementById('submitBtn'),
  hintBtn: document.getElementById('hintBtn'),
  hintBox: document.getElementById('hintBox'),
  message: document.getElementById('message'),
  nextArea: document.getElementById('nextArea'),
  progress: document.getElementById('progress')
};

function findNode(id){ return nodes.find(n => n.id === id); }
function renderProgress(){ el.progress.textContent = `è¿›åº¦ï¼šç¬¬ ${currentNodeId} / ${nodes.length} æ­¥`; }

function loadNode(id){
  const node = findNode(id);
  if(!node) return;
  currentNodeId = node.id;
  localStorage.setItem('puzzle_current_node', String(currentNodeId));
  el.promptTxt.innerText = node.prompt;
  el.hintBox.style.display = 'none';
  el.hintBox.innerText = node.hint;
  el.message.style.display = 'none';
  el.answerInput.value = "";
  el.answerInput.focus();
  el.nextArea.innerHTML = "";
  renderProgress();
}

function checkAnswer(){
  const node = findNode(currentNodeId);
  const raw = el.answerInput.value.trim();
  if(!raw){ showMessage('è¯·è¾“å…¥ç­”æ¡ˆå†æäº¤å“¦ï½','error'); return; }
  const input = raw.toUpperCase();
  if(input === node.answer.toUpperCase()){
    showMessage(node.successText,'success');
    const nextNode = findNode(currentNodeId + 1);
    if(nextNode){
      const btn = document.createElement('button');
      btn.className = 'btn';
      btn.innerText = 'è¿›å…¥ä¸‹ä¸€å…³ â¡ï¸';
      btn.onclick = () => loadNode(nextNode.id);
      el.nextArea.appendChild(btn);
    } else {
      localStorage.setItem('puzzle_finished', 'true');
    }
  } else {
    showMessage('ç­”æ¡ˆä¸å¯¹ï¼Œå†æƒ³æƒ³ï½','error');
  }
}

function showMessage(text, type){
  el.message.style.display = 'block';
  el.message.className = 'msg ' + (type === 'success' ? 'success':'error');
  el.message.innerHTML = text;
}

el.submitBtn.addEventListener('click', checkAnswer);
el.hintBtn.addEventListener('click', () => {
  el.hintBox.style.display = el.hintBox.style.display === 'none' ? 'block' : 'none';
});
el.answerInput.addEventListener('keydown', e => { if(e.key === 'Enter'){ checkAnswer(); } });

document.addEventListener('DOMContentLoaded', () => {
  if(localStorage.getItem('puzzle_finished') === 'true'){
    currentNodeId = nodes.length;
    loadNode(currentNodeId);
    showMessage('ä½ å·²ç»å®Œæˆå•¦ ğŸ’– å¦‚æœæƒ³é‡æ–°å¼€å§‹ï¼Œç‚¹å‡»ä¸‹æ–¹æŒ‰é’®','success');
    const resetBtn = document.createElement('button');
    resetBtn.className = 'btn secondary';
    resetBtn.textContent = 'é‡ç½®è¿›åº¦';
    resetBtn.onclick = () => {
      localStorage.removeItem('puzzle_current_node');
      localStorage.removeItem('puzzle_finished');
      currentNodeId = 1;
      loadNode(1);
      el.message.style.display = 'none';
    };
    el.nextArea.appendChild(resetBtn);
  } else {
    loadNode(currentNodeId);
  }
});
</script>
</body>
</html>
